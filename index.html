<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script src="bower_components/paralleljs/lib/parallel.js"></script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/lodash/lodash.min.js"></script>
  <script>
    $(document).ready(function() {
      var resultsElm = $('pre');

      window.print = function(string) {
        resultsElm.prepend('<p>' + string.join('\n') + '\n--------------------\n' + '</p>');
      };

      window.test = function(times) {
        var arr = _.times(times);
        var results = ['Loops: ' + times];

        //
        // Series
        //
        // var serStart = Date.now();
        // arr.map(function() {
        //   var final = [];
        //   for (var i = 0; i < 1000; i += 1) {
        //     final.push(Math.exp(Math.random() * Math.E / (1 - Math.E)));
        //     final.reverse();
        //   }
        //   return final;
        // });
        // var serDuration = Date.now() - serStart;
        // results.push('series time: ' + serDuration);

        //
        // Parallel
        //
        var parStart = Date.now();
        var par = new Parallel(arr);
        par.map(function parMap() {
          var final = [];
          for (var i = 0; i < 1000; i += 1) {
            final.push(Math.exp(Math.random() * Math.E / (1 - Math.E)));
            final.reverse();
          }
          return final;
        })
          .then(function() {
            var parDuration = Date.now() - parStart;
            results.push('parallel time: ' + parDuration);
            print(results)
          });
      }
    });
  </script>
</head>
<body>
<h1>ParallelJS vs Native [].map()</h1>

<button onclick="test(10)">Test(10)</button>
<button onclick="test(100)">Test(100)</button>
<button onclick="test(1000)">Test(1000)</button>
<button onclick="test(10000)">Test(10000)</button>
<hr />
<pre></pre>

</body>
</html>
